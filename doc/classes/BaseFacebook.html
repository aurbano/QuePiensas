<!DOCTYPE html><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width; initial-scale=1.0; maximum-scale=1.0; user-scalable=0;">
<meta charset="utf-8">
<title>phpDocumentor » \BaseFacebook</title>
<meta name="author" content="Mike van Riel">
<meta name="description" content="">
<link href="../css/template.css" rel="stylesheet" media="all">
<script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script><script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script><script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script><script src="../js/bootstrap.js" type="text/javascript"></script><script src="../js/template.js" type="text/javascript"></script><script src="../js/prettify/prettify.min.js" type="text/javascript"></script><link rel="shortcut icon" href="../img/favicon.ico">
<link rel="apple-touch-icon" href="../img/apple-touch-icon.png">
<link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png">
</head>
<body>
<div class="navbar navbar-fixed-top">
<div class="navbar-inner"><div class="container">
<a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse"><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></a><a class="brand" href="../index.html">phpDocumentor</a><div class="nav-collapse"><ul class="nav">
<li class="dropdown">
<a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                    API Documentation <b class="caret"></b></a><ul class="dropdown-menu">
<li><a>Packages</a></li>
<li><a href="../packages/Database.html"><i class="icon-folder-open"></i> Database</a></li>
<li><a href="../packages/Default.html"><i class="icon-folder-open"></i> Default</a></li>
<li><a href="../packages/Display.html"><i class="icon-folder-open"></i> Display</a></li>
<li><a href="../packages/Files.html"><i class="icon-folder-open"></i> Files</a></li>
<li><a href="../packages/Security.html"><i class="icon-folder-open"></i> Security</a></li>
<li><a href="../packages/Session.html"><i class="icon-folder-open"></i> Session</a></li>
<li><a href="../packages/Social.html"><i class="icon-folder-open"></i> Social</a></li>
<li><a href="../packages/Users.html"><i class="icon-folder-open"></i> Users</a></li>
</ul>
</li>
<li class="dropdown" id="charts-menu">
<a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                    Charts <b class="caret"></b></a><ul class="dropdown-menu"><li><a href="../graph_class.html"><i class="icon-list-alt"></i> Class hierarchy diagram</a></li></ul>
</li>
<li class="dropdown" id="reports-menu">
<a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                    Reports <b class="caret"></b></a><ul class="dropdown-menu">
<li><a href="../errors.html"><i class="icon-remove-sign"></i> Errors 
                <span class="label label-info">81</span></a></li>
<li><a href="../markers.html"><i class="icon-map-marker"></i> Markers 
                <ul></ul></a></li>
<li><a href="../deprecated.html"><i class="icon-stop"></i> Deprecated elements 
                <span class="label label-info">0</span></a></li>
</ul>
</li>
</ul></div>
</div></div>
<div class="go_to_top"><a href="#___" style="color: inherit">Back to top  <i class="icon-upload icon-white"></i></a></div>
</div>
<div id="___" class="container">
<noscript><div class="alert alert-warning">
                            Javascript is disabled; several features are only available
                            if Javascript is enabled.
                        </div></noscript>
<div class="row">
<div class="span4">
<span class="btn-group visibility" data-toggle="buttons-checkbox"><button class="btn public active" title="Show public elements">Public</button><button class="btn protected" title="Show protected elements">Protected</button><button class="btn private" title="Show private elements">Private</button><button class="btn inherited active" title="Show inherited elements">Inherited</button></span><div class="btn-group view pull-right" data-toggle="buttons-radio">
<button class="btn details" title="Show descriptions and method names"><i class="icon-list"></i></button><button class="btn simple" title="Show only method names"><i class="icon-align-justify"></i></button>
</div>
<ul class="side-nav nav nav-list">
<li class="nav-header">
<i class="icon-custom icon-method"></i> Methods
                    <ul>
<li class="method public "><a href="#method___construct" title="__construct :: Initialize a Facebook Application."><span class="description">Initialize a Facebook Application.</span><pre>__construct()</pre></a></li>
<li class="method public "><a href="#method_api" title="api :: Make an API call."><span class="description">Make an API call.</span><pre>api()</pre></a></li>
<li class="method public "><a href="#method_destroySession" title="destroySession :: Destroy the current session"><span class="description">Destroy the current session</span><pre>destroySession()</pre></a></li>
<li class="method public "><a href="#method_getAccessToken" title="getAccessToken :: Determines the access token that should be used for API calls."><span class="description">Determines the access token that should be used for API calls.</span><pre>getAccessToken()</pre></a></li>
<li class="method public "><a href="#method_getApiSecret" title="getApiSecret :: Get the API Secret."><span class="description">Get the API Secret.</span><pre>getApiSecret()</pre></a></li>
<li class="method public "><a href="#method_getAppId" title="getAppId :: Get the Application ID."><span class="description">Get the Application ID.</span><pre>getAppId()</pre></a></li>
<li class="method public "><a href="#method_getCode" title="getCode :: Get the authorization code from the query parameters, if it exists,
and otherwise return false to signal no authorization code was
discoverable."><span class="description">Get the authorization code from the query parameters, if it exists,
and otherwise return false to signal no authorization code was
discoverable.</span><pre>getCode()</pre></a></li>
<li class="method public "><a href="#method_getLoginStatusUrl" title="getLoginStatusUrl :: Get a login status URL to fetch the status from Facebook."><span class="description">Get a login status URL to fetch the status from Facebook.</span><pre>getLoginStatusUrl()</pre></a></li>
<li class="method public "><a href="#method_getLoginUrl" title="getLoginUrl :: Get a Login URL for use with redirects."><span class="description">Get a Login URL for use with redirects.</span><pre>getLoginUrl()</pre></a></li>
<li class="method public "><a href="#method_getLogoutUrl" title="getLogoutUrl :: Get a Logout URL suitable for use with redirects."><span class="description">Get a Logout URL suitable for use with redirects.</span><pre>getLogoutUrl()</pre></a></li>
<li class="method public "><a href="#method_getSignedRequest" title="getSignedRequest :: Retrieve the signed request, either from a request parameter or,
if not present, from a cookie."><span class="description">Retrieve the signed request, either from a request parameter or,
if not present, from a cookie.</span><pre>getSignedRequest()</pre></a></li>
<li class="method public "><a href="#method_getUser" title="getUser :: Get the UID of the connected user, or 0
if the Facebook user is not connected."><span class="description">Get the UID of the connected user, or 0
if the Facebook user is not connected.</span><pre>getUser()</pre></a></li>
<li class="method public "><a href="#method_getUserAccessToken" title="getUserAccessToken :: Determines and returns the user access token, first using
the signed request if present, and then falling back on
the authorization code if present."><span class="description">Determines and returns the user access token, first using
the signed request if present, and then falling back on
the authorization code if present.</span><pre>getUserAccessToken()</pre></a></li>
<li class="method public "><a href="#method_setAccessToken" title="setAccessToken :: Sets the access token for api calls."><span class="description">Sets the access token for api calls.</span><pre>setAccessToken()</pre></a></li>
<li class="method public "><a href="#method_setApiSecret" title="setApiSecret :: Set the API Secret."><span class="description">Set the API Secret.</span><pre>setApiSecret()</pre></a></li>
<li class="method public "><a href="#method_setAppId" title="setAppId :: Set the Application ID."><span class="description">Set the Application ID.</span><pre>setAppId()</pre></a></li>
<li class="method public "><a href="#method_setFileUploadSupport" title="setFileUploadSupport :: Set the file upload support status."><span class="description">Set the file upload support status.</span><pre>setFileUploadSupport()</pre></a></li>
<li class="method public "><a href="#method_useFileUploadSupport" title="useFileUploadSupport :: Get the file upload support status."><span class="description">Get the file upload support status.</span><pre>useFileUploadSupport()</pre></a></li>
</ul>
</li>
<li class="nav-header protected">» Protected
                    <ul>
<li class="method protected "><a href="#method__graph" title="_graph :: Invoke the Graph API."><span class="description">Invoke the Graph API.</span><pre>_graph()</pre></a></li>
<li class="method protected "><a href="#method__oauthRequest" title="_oauthRequest :: Make a OAuth Request."><span class="description">Make a OAuth Request.</span><pre>_oauthRequest()</pre></a></li>
<li class="method protected "><a href="#method__restserver" title="_restserver :: Invoke the old restserver.php endpoint."><span class="description">Invoke the old restserver.php endpoint.</span><pre>_restserver()</pre></a></li>
<li class="method protected "><a href="#method_base64UrlDecode" title="base64UrlDecode :: Base64 encoding that doesn't need to be urlencode()ed."><span class="description">Base64 encoding that doesn't need to be urlencode()ed.</span><pre>base64UrlDecode()</pre></a></li>
<li class="method protected "><a href="#method_clearAllPersistentData" title="clearAllPersistentData :: Clear all data from the persistent storage"><span class="description">Clear all data from the persistent storage</span><pre>clearAllPersistentData()</pre></a></li>
<li class="method protected "><a href="#method_clearPersistentData" title="clearPersistentData :: Clear the data with $key from the persistent storage"><span class="description">Clear the data with $key from the persistent storage</span><pre>clearPersistentData()</pre></a></li>
<li class="method protected "><a href="#method_errorLog" title="errorLog :: Prints to the error log if you aren't in command line mode."><span class="description">Prints to the error log if you aren't in command line mode.</span><pre>errorLog()</pre></a></li>
<li class="method protected "><a href="#method_establishCSRFTokenState" title="establishCSRFTokenState :: Lays down a CSRF state token for this process."><span class="description">Lays down a CSRF state token for this process.</span><pre>establishCSRFTokenState()</pre></a></li>
<li class="method protected "><a href="#method_getAccessTokenFromCode" title="getAccessTokenFromCode :: Retrieves an access token for the given authorization code
(previously generated from www.facebook.com on behalf of
a specific user)."><span class="description">Retrieves an access token for the given authorization code
(previously generated from www.facebook.com on behalf of
a specific user).</span><pre>getAccessTokenFromCode()</pre></a></li>
<li class="method protected "><a href="#method_getApiUrl" title="getApiUrl :: Build the URL for api given parameters."><span class="description">Build the URL for api given parameters.</span><pre>getApiUrl()</pre></a></li>
<li class="method protected "><a href="#method_getApplicationAccessToken" title="getApplicationAccessToken :: Returns the access token that should be used for logged out
users when no authorization code is available."><span class="description">Returns the access token that should be used for logged out
users when no authorization code is available.</span><pre>getApplicationAccessToken()</pre></a></li>
<li class="method protected "><a href="#method_getCurrentUrl" title="getCurrentUrl :: Returns the Current URL, stripping it of known FB parameters that should
not persist."><span class="description">Returns the Current URL, stripping it of known FB parameters that should
not persist.</span><pre>getCurrentUrl()</pre></a></li>
<li class="method protected "><a href="#method_getPersistentData" title="getPersistentData :: Get the data for $key, persisted by BaseFacebook::setPersistentData()"><span class="description">Get the data for $key, persisted by BaseFacebook::setPersistentData()</span><pre>getPersistentData()</pre></a></li>
<li class="method protected "><a href="#method_getSignedRequestCookieName" title="getSignedRequestCookieName :: Constructs and returns the name of the cookie that
potentially houses the signed request for the app user."><span class="description">Constructs and returns the name of the cookie that
potentially houses the signed request for the app user.</span><pre>getSignedRequestCookieName()</pre></a></li>
<li class="method protected "><a href="#method_getUrl" title="getUrl :: Build the URL for given domain alias, path and parameters."><span class="description">Build the URL for given domain alias, path and parameters.</span><pre>getUrl()</pre></a></li>
<li class="method protected "><a href="#method_getUserFromAccessToken" title="getUserFromAccessToken :: Retrieves the UID with the understanding that
$this-&gt;accessToken has already been set and is
seemingly legitimate."><span class="description">Retrieves the UID with the understanding that
$this-&gt;accessToken has already been set and is
seemingly legitimate.</span><pre>getUserFromAccessToken()</pre></a></li>
<li class="method protected "><a href="#method_getUserFromAvailableData" title="getUserFromAvailableData :: Determines the connected user by first examining any signed
requests, then considering an authorization code, and then
falling back to any persistent store storing the user."><span class="description">Determines the connected user by first examining any signed
requests, then considering an authorization code, and then
falling back to any persistent store storing the user.</span><pre>getUserFromAvailableData()</pre></a></li>
<li class="method protected "><a href="#method_makeRequest" title="makeRequest :: Makes an HTTP request."><span class="description">Makes an HTTP request.</span><pre>makeRequest()</pre></a></li>
<li class="method protected "><a href="#method_parseSignedRequest" title="parseSignedRequest :: Parses a signed_request and validates the signature."><span class="description">Parses a signed_request and validates the signature.</span><pre>parseSignedRequest()</pre></a></li>
<li class="method protected "><a href="#method_setPersistentData" title="setPersistentData :: Stores the given ($key, $value) pair, so that future calls to
getPersistentData($key) return $value."><span class="description">Stores the given ($key, $value) pair, so that future calls to
getPersistentData($key) return $value.</span><pre>setPersistentData()</pre></a></li>
<li class="method protected "><a href="#method_shouldRetainParam" title="shouldRetainParam :: Returns true if and only if the key or key/value pair should
be retained as part of the query string."><span class="description">Returns true if and only if the key or key/value pair should
be retained as part of the query string.</span><pre>shouldRetainParam()</pre></a></li>
<li class="method protected "><a href="#method_throwAPIException" title="throwAPIException :: Analyzes the supplied result to see if it was thrown
because the access token is no longer valid."><span class="description">Analyzes the supplied result to see if it was thrown
because the access token is no longer valid.</span><pre>throwAPIException()</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i class="icon-custom icon-property"></i> Properties
                    <ul>
<li class="property public "><a href="#property_CURL_OPTS" title="$CURL_OPTS :: Default options for curl."><span class="description"></span><pre>$CURL_OPTS</pre></a></li>
<li class="property public "><a href="#property_DOMAIN_MAP" title="$DOMAIN_MAP :: Maps aliases to Facebook domains."><span class="description"></span><pre>$DOMAIN_MAP</pre></a></li>
</ul>
</li>
<li class="nav-header protected">» Protected
                    <ul>
<li class="property protected "><a href="#property_DROP_QUERY_PARAMS" title="$DROP_QUERY_PARAMS :: List of query parameters that get automatically dropped when rebuilding
the current URL."><span class="description"></span><pre>$DROP_QUERY_PARAMS</pre></a></li>
<li class="property protected "><a href="#property_accessToken" title="$accessToken :: The OAuth access token received in exchange for a valid authorization
code."><span class="description"></span><pre>$accessToken</pre></a></li>
<li class="property protected "><a href="#property_apiSecret" title="$apiSecret :: The Application API Secret."><span class="description"></span><pre>$apiSecret</pre></a></li>
<li class="property protected "><a href="#property_appId" title="$appId :: The Application ID."><span class="description"></span><pre>$appId</pre></a></li>
<li class="property protected "><a href="#property_fileUploadSupport" title="$fileUploadSupport :: Indicates if the CURL based @ syntax for file uploads is enabled."><span class="description"></span><pre>$fileUploadSupport</pre></a></li>
<li class="property protected "><a href="#property_signedRequest" title="$signedRequest :: The data from the signed_request token."><span class="description"></span><pre>$signedRequest</pre></a></li>
<li class="property protected "><a href="#property_state" title="$state :: A CSRF state variable to assist in the defense against CSRF attacks."><span class="description"></span><pre>$state</pre></a></li>
<li class="property protected "><a href="#property_user" title="$user :: The ID of the Facebook user, or 0 if the user is logged out."><span class="description"></span><pre>$user</pre></a></li>
</ul>
</li>
<li class="nav-header">
<i class="icon-custom icon-constant"></i> Constants
                    <ul><li class="constant  "><a href="#constant_VERSION" title="VERSION :: Version."><span class="description">Version.</span><pre>VERSION</pre></a></li></ul>
</li>
</ul>
</div>
<div class="span8">
<a id="\BaseFacebook"></a><ul class="breadcrumb">
<li>
<a href="../index.html"><i class="icon-custom icon-class"></i></a><span class="divider">\</span>
</li>
<li><a href="../namespaces/global.html">global</a></li>
<li class="active">
<span class="divider">\</span><a href="../classes/BaseFacebook.html">BaseFacebook</a>
</li>
</ul>
<div class="element class">
<p class="short_description">Provides access to the Facebook Platform.</p>
<div class="details">
<div class="long_description"><p>This class provides
a majority of the functionality needed, but the class is abstract
because it is designed to be sub-classed.  The subclass must
implement the four abstract methods listed at the bottom of
the file.</p></div>
<table class="table table-bordered"><tr>
<th>author</th>
<td><a href="mailto:naitik@facebook.com">Naitik Shah</a></td>
</tr></table>
<h3>
<i class="icon-custom icon-method"></i> Methods</h3>
<a id="method___construct"></a><div class="element clickable method public method___construct" data-toggle="collapse" data-target=".method___construct .collapse">
<h2>Initialize a Facebook Application.</h2>
<pre>__construct(array $config) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The configuration:
- appId: the application ID
- secret: the application secret
- fileUpload: (optional) boolean indicating if file uploads are enabled</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$config</h4>
<code>array</code><p>The application configuration</p></div>
</div></div>
</div>
<a id="method_api"></a><div class="element clickable method public method_api" data-toggle="collapse" data-target=".method_api .collapse">
<h2>Make an API call.</h2>
<pre>api() : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>The decoded response</div>
</div></div>
</div>
<a id="method_destroySession"></a><div class="element clickable method public method_destroySession" data-toggle="collapse" data-target=".method_destroySession .collapse">
<h2>Destroy the current session</h2>
<pre>destroySession() </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="method_getAccessToken"></a><div class="element clickable method public method_getAccessToken" data-toggle="collapse" data-target=".method_getAccessToken .collapse">
<h2>Determines the access token that should be used for API calls.</h2>
<pre>getAccessToken() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The first time this is called, $this->accessToken is set equal
to either a valid user access token, or it's set to the application
access token if a valid user access token wasn't available.  Subsequent
calls return whatever the first call returned.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The access token</div>
</div></div>
</div>
<a id="method_getApiSecret"></a><div class="element clickable method public method_getApiSecret" data-toggle="collapse" data-target=".method_getApiSecret .collapse">
<h2>Get the API Secret.</h2>
<pre>getApiSecret() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>the API Secret</div>
</div></div>
</div>
<a id="method_getAppId"></a><div class="element clickable method public method_getAppId" data-toggle="collapse" data-target=".method_getAppId .collapse">
<h2>Get the Application ID.</h2>
<pre>getAppId() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>the Application ID</div>
</div></div>
</div>
<a id="method_getCode"></a><div class="element clickable method public method_getCode" data-toggle="collapse" data-target=".method_getCode .collapse">
<h2>Get the authorization code from the query parameters, if it exists,
and otherwise return false to signal no authorization code was
discoverable.</h2>
<pre>getCode() : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>The authorization code, or false if the authorization
              code could not be determined.</div>
</div></div>
</div>
<a id="method_getLoginStatusUrl"></a><div class="element clickable method public method_getLoginStatusUrl" data-toggle="collapse" data-target=".method_getLoginStatusUrl .collapse">
<h2>Get a login status URL to fetch the status from Facebook.</h2>
<pre>getLoginStatusUrl(array $params) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The parameters:
- ok_session: the URL to go to if a session is found
- no_session: the URL to go to if the user is not connected
- no_user: the URL to go to if the user is not signed into facebook</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$params</h4>
<code>array</code><p>Provide custom parameters</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The URL for the logout flow</div>
</div></div>
</div>
<a id="method_getLoginUrl"></a><div class="element clickable method public method_getLoginUrl" data-toggle="collapse" data-target=".method_getLoginUrl .collapse">
<h2>Get a Login URL for use with redirects.</h2>
<pre>getLoginUrl(array $params) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>By default, full page redirect is
assumed. If you are using the generated URL with a window.open() call in
JavaScript, you can pass in display=popup as part of the $params.</p>

<p>The parameters:
- redirect_uri: the url to go to after a successful login
- scope: comma separated list of requested extended perms</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$params</h4>
<code>array</code><p>Provide custom parameters</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The URL for the login flow</div>
</div></div>
</div>
<a id="method_getLogoutUrl"></a><div class="element clickable method public method_getLogoutUrl" data-toggle="collapse" data-target=".method_getLogoutUrl .collapse">
<h2>Get a Logout URL suitable for use with redirects.</h2>
<pre>getLogoutUrl(array $params) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The parameters:
- next: the url to go to after a successful logout</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$params</h4>
<code>array</code><p>Provide custom parameters</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The URL for the logout flow</div>
</div></div>
</div>
<a id="method_getSignedRequest"></a><div class="element clickable method public method_getSignedRequest" data-toggle="collapse" data-target=".method_getSignedRequest .collapse">
<h2>Retrieve the signed request, either from a request parameter or,
if not present, from a cookie.</h2>
<pre>getSignedRequest() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>the signed request, if available, or null otherwise.</div>
</div></div>
</div>
<a id="method_getUser"></a><div class="element clickable method public method_getUser" data-toggle="collapse" data-target=".method_getUser .collapse">
<h2>Get the UID of the connected user, or 0
if the Facebook user is not connected.</h2>
<pre>getUser() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>the UID if available.</div>
</div></div>
</div>
<a id="method_getUserAccessToken"></a><div class="element clickable method public method_getUserAccessToken" data-toggle="collapse" data-target=".method_getUserAccessToken .collapse">
<h2>Determines and returns the user access token, first using
the signed request if present, and then falling back on
the authorization code if present.</h2>
<pre>getUserAccessToken() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The intent is to
return a valid user access token, or false if one is determined
to not be available.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>A valid user access token, or false if one
               could not be determined.</div>
</div></div>
</div>
<a id="method_setAccessToken"></a><div class="element clickable method public method_setAccessToken" data-toggle="collapse" data-target=".method_setAccessToken .collapse">
<h2>Sets the access token for api calls.</h2>
<pre>setAccessToken(string $access_token) : <a href="../classes/BaseFacebook.html">\BaseFacebook</a></pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Use this if you get
your access token by other means and just want the SDK
to use it.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$access_token</h4>
<code>string</code><p>an access token.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code><a href="../classes/BaseFacebook.html">\BaseFacebook</a></code></div>
</div></div>
</div>
<a id="method_setApiSecret"></a><div class="element clickable method public method_setApiSecret" data-toggle="collapse" data-target=".method_setApiSecret .collapse">
<h2>Set the API Secret.</h2>
<pre>setApiSecret(string $apiSecret) : <a href="../classes/BaseFacebook.html">\BaseFacebook</a></pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$apiSecret</h4>
<code>string</code><p>The API Secret</p></div>
<h3>Returns</h3>
<div class="subelement response"><code><a href="../classes/BaseFacebook.html">\BaseFacebook</a></code></div>
</div></div>
</div>
<a id="method_setAppId"></a><div class="element clickable method public method_setAppId" data-toggle="collapse" data-target=".method_setAppId .collapse">
<h2>Set the Application ID.</h2>
<pre>setAppId(string $appId) : <a href="../classes/BaseFacebook.html">\BaseFacebook</a></pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$appId</h4>
<code>string</code><p>The Application ID</p></div>
<h3>Returns</h3>
<div class="subelement response"><code><a href="../classes/BaseFacebook.html">\BaseFacebook</a></code></div>
</div></div>
</div>
<a id="method_setFileUploadSupport"></a><div class="element clickable method public method_setFileUploadSupport" data-toggle="collapse" data-target=".method_setFileUploadSupport .collapse">
<h2>Set the file upload support status.</h2>
<pre>setFileUploadSupport(boolean $fileUploadSupport) : <a href="../classes/BaseFacebook.html">\BaseFacebook</a></pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$fileUploadSupport</h4>
<code>boolean</code><p>The file upload support status.</p></div>
<h3>Returns</h3>
<div class="subelement response"><code><a href="../classes/BaseFacebook.html">\BaseFacebook</a></code></div>
</div></div>
</div>
<a id="method_useFileUploadSupport"></a><div class="element clickable method public method_useFileUploadSupport" data-toggle="collapse" data-target=".method_useFileUploadSupport .collapse">
<h2>Get the file upload support status.</h2>
<pre>useFileUploadSupport() : boolean</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>boolean</code>true if and only if the server supports file upload.</div>
</div></div>
</div>
<a id="method__graph"></a><div class="element clickable method protected method__graph" data-toggle="collapse" data-target=".method__graph .collapse">
<h2>Invoke the Graph API.</h2>
<pre>_graph(string $path, string $method, array $params) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$path</h4>
<code>string</code><p>The path (required)</p>
</div>
<div class="subelement argument">
<h4>$method</h4>
<code>string</code><p>The http method (default 'GET')</p>
</div>
<div class="subelement argument">
<h4>$params</h4>
<code>array</code><p>The query/post data</p>
</div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/FacebookApiException.html">\FacebookApiException</a></code></th>
<td></td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>The decoded response object</div>
</div></div>
</div>
<a id="method__oauthRequest"></a><div class="element clickable method protected method__oauthRequest" data-toggle="collapse" data-target=".method__oauthRequest .collapse">
<h2>Make a OAuth Request.</h2>
<pre>_oauthRequest(string $url, array $params) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$url</h4>
<code>string</code><p>The path (required)</p>
</div>
<div class="subelement argument">
<h4>$params</h4>
<code>array</code><p>The query/post data</p>
</div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/FacebookApiException.html">\FacebookApiException</a></code></th>
<td></td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The decoded response object</div>
</div></div>
</div>
<a id="method__restserver"></a><div class="element clickable method protected method__restserver" data-toggle="collapse" data-target=".method__restserver .collapse">
<h2>Invoke the old restserver.php endpoint.</h2>
<pre>_restserver(array $params) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$params</h4>
<code>array</code><p>Method call object</p></div>
<h3>Exceptions</h3>
<table class="table table-bordered"><tr>
<th><code><a href="../classes/FacebookApiException.html">\FacebookApiException</a></code></th>
<td></td>
</tr></table>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>The decoded response object</div>
</div></div>
</div>
<a id="method_base64UrlDecode"></a><div class="element clickable method protected method_base64UrlDecode" data-toggle="collapse" data-target=".method_base64UrlDecode .collapse">
<h2>Base64 encoding that doesn't need to be urlencode()ed.</h2>
<pre>base64UrlDecode(string $input) : string</pre>
<div class="labels"><span class="label">Static</span></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>Exactly the same as base64_encode except it uses
  - instead of +
  _ instead of /</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$input</h4>
<code>string</code><p>base64UrlEncoded string</p></div>
<h3>Returns</h3>
<div class="subelement response"><code>string</code></div>
</div></div>
</div>
<a id="method_clearAllPersistentData"></a><div class="element clickable method protected method_clearAllPersistentData" data-toggle="collapse" data-target=".method_clearAllPersistentData .collapse">
<h2>Clear all data from the persistent storage</h2>
<pre>clearAllPersistentData() : void</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="method_clearPersistentData"></a><div class="element clickable method protected method_clearPersistentData" data-toggle="collapse" data-target=".method_clearPersistentData .collapse">
<h2>Clear the data with $key from the persistent storage</h2>
<pre>clearPersistentData(string $key) : void</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$key</h4>
<code>string</code>
</div>
</div></div>
</div>
<a id="method_errorLog"></a><div class="element clickable method protected method_errorLog" data-toggle="collapse" data-target=".method_errorLog .collapse">
<h2>Prints to the error log if you aren't in command line mode.</h2>
<pre>errorLog(string $msg) </pre>
<div class="labels"><span class="label">Static</span></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$msg</h4>
<code>string</code><p>Log message</p></div>
</div></div>
</div>
<a id="method_establishCSRFTokenState"></a><div class="element clickable method protected method_establishCSRFTokenState" data-toggle="collapse" data-target=".method_establishCSRFTokenState .collapse">
<h2>Lays down a CSRF state token for this process.</h2>
<pre>establishCSRFTokenState() : void</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="method_getAccessTokenFromCode"></a><div class="element clickable method protected method_getAccessTokenFromCode" data-toggle="collapse" data-target=".method_getAccessTokenFromCode .collapse">
<h2>Retrieves an access token for the given authorization code
(previously generated from www.facebook.com on behalf of
a specific user).</h2>
<pre>getAccessTokenFromCode(string $code, string $redirect_uri) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The authorization code is sent to graph.facebook.com
and a legitimate access token is generated provided the access token
and the user for which it was generated all match, and the user is
either logged in to Facebook or has granted an offline access permission.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$code</h4>
<code>string</code><p>An authorization code.</p></div>
<div class="subelement argument">
<h4>$redirect_uri</h4>
<code>string</code><p>URI where to redirect after authorization</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>mixed</code>An access token exchanged for the authorization code, or
              false if an access token could not be generated.</div>
</div></div>
</div>
<a id="method_getApiUrl"></a><div class="element clickable method protected method_getApiUrl" data-toggle="collapse" data-target=".method_getApiUrl .collapse">
<h2>Build the URL for api given parameters.</h2>
<pre>getApiUrl($method) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$method</h4><p>String the method name.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The URL for the given parameters</div>
</div></div>
</div>
<a id="method_getApplicationAccessToken"></a><div class="element clickable method protected method_getApplicationAccessToken" data-toggle="collapse" data-target=".method_getApplicationAccessToken .collapse">
<h2>Returns the access token that should be used for logged out
users when no authorization code is available.</h2>
<pre>getApplicationAccessToken() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The application access token, useful for gathering
               public information about users and applications.</div>
</div></div>
</div>
<a id="method_getCurrentUrl"></a><div class="element clickable method protected method_getCurrentUrl" data-toggle="collapse" data-target=".method_getCurrentUrl .collapse">
<h2>Returns the Current URL, stripping it of known FB parameters that should
not persist.</h2>
<pre>getCurrentUrl() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The current URL</div>
</div></div>
</div>
<a id="method_getPersistentData"></a><div class="element clickable method protected method_getPersistentData" data-toggle="collapse" data-target=".method_getPersistentData .collapse">
<h2>Get the data for $key, persisted by BaseFacebook::setPersistentData()</h2>
<pre>getPersistentData(string $key, boolean $default) : mixed</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$key</h4>
<code>string</code><p>The key of the data to retrieve</p></div>
<div class="subelement argument">
<h4>$default</h4>
<code>boolean</code><p>The default value to return if $key is not found</p>
</div>
<h3>Returns</h3>
<div class="subelement response"><code>mixed</code></div>
</div></div>
</div>
<a id="method_getSignedRequestCookieName"></a><div class="element clickable method protected method_getSignedRequestCookieName" data-toggle="collapse" data-target=".method_getSignedRequestCookieName .collapse">
<h2>Constructs and returns the name of the cookie that
potentially houses the signed request for the app user.</h2>
<pre>getSignedRequestCookieName() : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>The cookie is not set by the BaseFacebook class, but
it may be set by the JavaScript SDK.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>the name of the cookie that would house
        the signed request value.</div>
</div></div>
</div>
<a id="method_getUrl"></a><div class="element clickable method protected method_getUrl" data-toggle="collapse" data-target=".method_getUrl .collapse">
<h2>Build the URL for given domain alias, path and parameters.</h2>
<pre>getUrl($name, $path, $params) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$name</h4><p>string The name of the domain</p></div>
<div class="subelement argument">
<h4>$path</h4><p>string Optional path (without a leading slash)</p>
</div>
<div class="subelement argument">
<h4>$params</h4><p>array Optional query parameters</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The URL for the given parameters</div>
</div></div>
</div>
<a id="method_getUserFromAccessToken"></a><div class="element clickable method protected method_getUserFromAccessToken" data-toggle="collapse" data-target=".method_getUserFromAccessToken .collapse">
<h2>Retrieves the UID with the understanding that
$this-&gt;accessToken has already been set and is
seemingly legitimate.</h2>
<pre>getUserFromAccessToken() : integer</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>It relies on Facebook's Graph API
to retrieve user information and then extract
the user ID.</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>integer</code>Returns the UID of the Facebook user, or 0
                if the Facebook user could not be determined.</div>
</div></div>
</div>
<a id="method_getUserFromAvailableData"></a><div class="element clickable method protected method_getUserFromAvailableData" data-toggle="collapse" data-target=".method_getUserFromAvailableData .collapse">
<h2>Determines the connected user by first examining any signed
requests, then considering an authorization code, and then
falling back to any persistent store storing the user.</h2>
<pre>getUserFromAvailableData() : integer</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Returns</h3>
<div class="subelement response">
<code>integer</code>The id of the connected Facebook user,
                or 0 if no such user exists.</div>
</div></div>
</div>
<a id="method_makeRequest"></a><div class="element clickable method protected method_makeRequest" data-toggle="collapse" data-target=".method_makeRequest .collapse">
<h2>Makes an HTTP request.</h2>
<pre>makeRequest(string $url, array $params, \CurlHandler $ch) : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>This method can be overridden by subclasses if
developers want to do fancier things or use something other than curl to
make the request.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$url</h4>
<code>string</code><p>The URL to make the request to</p></div>
<div class="subelement argument">
<h4>$params</h4>
<code>array</code><p>The parameters to use for the POST body</p></div>
<div class="subelement argument">
<h4>$ch</h4>
<code>\CurlHandler</code><p>Initialized curl handle</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>string</code>The response text</div>
</div></div>
</div>
<a id="method_parseSignedRequest"></a><div class="element clickable method protected method_parseSignedRequest" data-toggle="collapse" data-target=".method_parseSignedRequest .collapse">
<h2>Parses a signed_request and validates the signature.</h2>
<pre>parseSignedRequest(string $signed_request) : array</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$signed_request</h4>
<code>string</code><p>A signed token</p></div>
<h3>Returns</h3>
<div class="subelement response">
<code>array</code>The payload inside it or null if the sig is wrong</div>
</div></div>
</div>
<a id="method_setPersistentData"></a><div class="element clickable method protected method_setPersistentData" data-toggle="collapse" data-target=".method_setPersistentData .collapse">
<h2>Stores the given ($key, $value) pair, so that future calls to
getPersistentData($key) return $value.</h2>
<pre>setPersistentData(string $key, array $value) : void</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>This call may be in another request.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$key</h4>
<code>string</code>
</div>
<div class="subelement argument">
<h4>$value</h4>
<code>array</code>
</div>
</div></div>
</div>
<a id="method_shouldRetainParam"></a><div class="element clickable method protected method_shouldRetainParam" data-toggle="collapse" data-target=".method_shouldRetainParam .collapse">
<h2>Returns true if and only if the key or key/value pair should
be retained as part of the query string.</h2>
<pre>shouldRetainParam(string $param) : boolean</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>This amounts to
a brute-force search of the very small list of Facebook-specific
params that should be stripped out.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$param</h4>
<code>string</code><p>A key or key/value pair within a URL's query (e.g.
                    'foo=a', 'foo=', or 'foo'.</p>
</div>
<h3>Returns</h3>
<div class="subelement response"><code>boolean</code></div>
</div></div>
</div>
<a id="method_throwAPIException"></a><div class="element clickable method protected method_throwAPIException" data-toggle="collapse" data-target=".method_throwAPIException .collapse">
<h2>Analyzes the supplied result to see if it was thrown
because the access token is no longer valid.</h2>
<pre>throwAPIException($result) </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description">
<div class="long_description"><p>If that is
the case, then the persistent store is cleared.</p></div>
<h3>Parameters</h3>
<div class="subelement argument">
<h4>$result</h4><p>array A record storing the error message returned
                     by a failed API call.</p></div>
</div></div>
</div>
<h3>
<i class="icon-custom icon-property"></i> Properties</h3>
<a id="property_CURL_OPTS"> </a><div class="element clickable property public property_CURL_OPTS" data-toggle="collapse" data-target=".property_CURL_OPTS .collapse">
<h2></h2>
<pre>$CURL_OPTS </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_DOMAIN_MAP"> </a><div class="element clickable property public property_DOMAIN_MAP" data-toggle="collapse" data-target=".property_DOMAIN_MAP .collapse">
<h2></h2>
<pre>$DOMAIN_MAP </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_DROP_QUERY_PARAMS"> </a><div class="element clickable property protected property_DROP_QUERY_PARAMS" data-toggle="collapse" data-target=".property_DROP_QUERY_PARAMS .collapse">
<h2></h2>
<pre>$DROP_QUERY_PARAMS </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_accessToken"> </a><div class="element clickable property protected property_accessToken" data-toggle="collapse" data-target=".property_accessToken .collapse">
<h2></h2>
<pre>$accessToken : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"><p>null means the access token has yet to be determined.</p></div></div></div>
</div>
<a id="property_apiSecret"> </a><div class="element clickable property protected property_apiSecret" data-toggle="collapse" data-target=".property_apiSecret .collapse">
<h2></h2>
<pre>$apiSecret : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_appId"> </a><div class="element clickable property protected property_appId" data-toggle="collapse" data-target=".property_appId .collapse">
<h2></h2>
<pre>$appId : string</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_fileUploadSupport"> </a><div class="element clickable property protected property_fileUploadSupport" data-toggle="collapse" data-target=".property_fileUploadSupport .collapse">
<h2></h2>
<pre>$fileUploadSupport : boolean</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_signedRequest"> </a><div class="element clickable property protected property_signedRequest" data-toggle="collapse" data-target=".property_signedRequest .collapse">
<h2></h2>
<pre>$signedRequest </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_state"> </a><div class="element clickable property protected property_state" data-toggle="collapse" data-target=".property_state .collapse">
<h2></h2>
<pre>$state </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<a id="property_user"> </a><div class="element clickable property protected property_user" data-toggle="collapse" data-target=".property_user .collapse">
<h2></h2>
<pre>$user : integer</pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
<h3>
<i class="icon-custom icon-constant"></i> Constants</h3>
<a id="constant_VERSION"> </a><div class="element clickable constant  constant_VERSION" data-toggle="collapse" data-target=".constant_VERSION .collapse">
<h2>Version.</h2>
<pre>VERSION </pre>
<div class="labels"></div>
<div class="row collapse"><div class="detail-description"><div class="long_description"></div></div></div>
</div>
</div>
</div>
</div>
</div>
<div class="row"><footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by <a href="http://glyphicons.com/">Glyphicons</a>.<br>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor 2.0.0a12</a> and<br>
            generated on 2013-02-09T14:13:47+01:00.<br></footer></div>
</div>
</body>
</html>
